<sql:ESelect xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:sql="http://www.example.org/sql"> <selectBody xsi:type="sql:EPlainSelect"> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="val"/> <expression xsi:type="sql:ELongValue" value="1"/> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="res"/> <expression xsi:type="sql:EEqualsTo"> <leftExpression xsi:type="sql:EFunction" name="COUNT" allColumns="true"/> <rightExpression xsi:type="sql:ELongValue" value="0"/> </expression> </selectItems> <fromItem xsi:type="sql:ESubSelect"> <alias name="TEMP_BODY"/> <selectBody xsi:type="sql:EPlainSelect"> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="val"/> <expression xsi:type="sql:ELongValue" value="1"/> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="res"/> <expression xsi:type="sql:ECaseExpression"> <switchExpression xsi:type="sql:EIsNullExpression"> <leftExpression xsi:type="sql:EColumn" columnName="ref_c"> <table name="TEMP_BODY"/> </leftExpression> </switchExpression> <elseExpression xsi:type="sql:EColumn" columnName="res"> <table name="TEMP_BODY"/> </elseExpression> <whenClauses> <whenExpression xsi:type="sql:ELongValue" value="1"/> <thenExpression xsi:type="sql:ELongValue" value="0"/> </whenClauses> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="ref_c"/> <expression xsi:type="sql:EColumn" columnName="ref_c"> <table name="TEMP_SOURCE"/> </expression> </selectItems> <fromItem xsi:type="sql:ESubSelect"> <alias name="TEMP_SOURCE"/> <selectBody xsi:type="sql:EPlainSelect"> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="val"/> <expression xsi:type="sql:EColumn" columnName="val"> <table name="TEMP_DMN"/> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="res"/> <expression xsi:type="sql:EColumn" columnName="res"> <table name="TEMP_DMN"/> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="ref_c"/> <expression xsi:type="sql:EColumn" columnName="res"> <table name="TEMP_DMN"/> </expression> </selectItems> <fromItem xsi:type="sql:ESubSelect"> <alias name="TEMP_DMN"/> <selectBody xsi:type="sql:EPlainSelect"> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="val"/> <expression xsi:type="sql:ELongValue" value="1"/> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="res"/> <expression xsi:type="sql:EColumn" columnName="Car_id"/> </selectItems> <fromItem xsi:type="sql:ETable" name="Car"/> </selectBody> </fromItem> </selectBody> </fromItem> <joins left="true"> <rightItem xsi:type="sql:ESubSelect"> <alias name="TEMP_BODY"/> <selectBody xsi:type="sql:EPlainSelect"> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="val"/> <expression xsi:type="sql:ELongValue" value="1"/> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="res"/> <expression xsi:type="sql:EGreaterThan"> <leftExpression xsi:type="sql:EFunction" name="COUNT" allColumns="true"/> <rightExpression xsi:type="sql:ELongValue" value="0"/> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="ref_c"/> <expression xsi:type="sql:EColumn" columnName="ref_c"> <table name="TEMP_BODY"/> </expression> </selectItems> <fromItem xsi:type="sql:ESubSelect"> <alias name="TEMP_BODY"/> <selectBody xsi:type="sql:EPlainSelect"> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="res"/> <expression xsi:type="sql:EEqualsTo"> <leftExpression xsi:type="sql:EColumn" columnName="res"> <table name="TEMP_LEFT"/> </leftExpression> <rightExpression xsi:type="sql:EColumn" columnName="res"> <table name="TEMP_RIGHT"/> </rightExpression> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="val"/> <expression xsi:type="sql:ECaseExpression"> <switchExpression xsi:type="sql:EOrExpression"> <leftExpression xsi:type="sql:EEqualsTo"> <leftExpression xsi:type="sql:EColumn" columnName="val"> <table name="TEMP_LEFT"/> </leftExpression> <rightExpression xsi:type="sql:ELongValue" value="0"/> </leftExpression> <rightExpression xsi:type="sql:EEqualsTo"> <leftExpression xsi:type="sql:EColumn" columnName="val"> <table name="TEMP_RIGHT"/> </leftExpression> <rightExpression xsi:type="sql:ELongValue" value="0"/> </rightExpression> </switchExpression> <elseExpression xsi:type="sql:ELongValue" value="1"/> <whenClauses> <whenExpression xsi:type="sql:ELongValue" value="1"/> <thenExpression xsi:type="sql:ELongValue" value="0"/> </whenClauses> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="ref_p"/> <expression xsi:type="sql:EColumn" columnName="ref_p"> <table name="TEMP_LEFT"/> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="ref_c"/> <expression xsi:type="sql:EColumn" columnName="ref_c"> <table name="TEMP_LEFT"/> </expression> </selectItems> <fromItem xsi:type="sql:ESubSelect"> <alias name="TEMP_LEFT"/> <selectBody xsi:type="sql:EPlainSelect"> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="val"/> <expression xsi:type="sql:EColumn" columnName="val"> <table name="TEMP_OBJ"/> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="res"/> <expression xsi:type="sql:EColumn" columnName="name"> <table name="Person"/> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="ref_p"/> <expression xsi:type="sql:EColumn" columnName="ref_p"> <table name="TEMP_OBJ"/> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="ref_c"/> <expression xsi:type="sql:EColumn" columnName="ref_c"> <table name="TEMP_OBJ"/> </expression> </selectItems> <fromItem xsi:type="sql:ESubSelect"> <alias name="TEMP_OBJ"/> <selectBody xsi:type="sql:EPlainSelect"> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="val"/> <expression xsi:type="sql:EColumn" columnName="val"> <table name="TEMP_DMN"/> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="res"/> <expression xsi:type="sql:EColumn" columnName="res"> <table name="TEMP_DMN"/> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="ref_p"/> <expression xsi:type="sql:EColumn" columnName="res"> <table name="TEMP_DMN"/> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="ref_c"/> <expression xsi:type="sql:EColumn" columnName="ref_c"> <table name="TEMP_DMN"/> </expression> </selectItems> <fromItem xsi:type="sql:ESubSelect"> <alias name="TEMP_DMN"/> <selectBody xsi:type="sql:EPlainSelect"> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="res"/> <expression xsi:type="sql:EColumn" columnName="owners"> <table name="Car_ownedCars_owners_Person"/> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="val"/> <expression xsi:type="sql:ECaseExpression"> <switchExpression xsi:type="sql:EIsNullExpression"> <leftExpression xsi:type="sql:EColumn" columnName="ownedCars"> <table name="Car_ownedCars_owners_Person"/> </leftExpression> </switchExpression> <elseExpression xsi:type="sql:ELongValue" value="1"/> <whenClauses> <whenExpression xsi:type="sql:ELongValue" value="1"/> <thenExpression xsi:type="sql:ELongValue" value="0"/> </whenClauses> </expression> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="ref_c"/> <expression xsi:type="sql:EColumn" columnName="Car_id"> <table name="Car"/> </expression> </selectItems> <fromItem xsi:type="sql:ETable" name="Car"/> <joins left="true"> <rightItem xsi:type="sql:ETable" name="Car_ownedCars_owners_Person"/> <onExpression xsi:type="sql:EEqualsTo"> <leftExpression xsi:type="sql:EColumn" columnName="Car_id"> <table name="Car"/> </leftExpression> <rightExpression xsi:type="sql:EColumn" columnName="ownedCars"> <table name="Car_ownedCars_owners_Person"/> </rightExpression> </onExpression> </joins> </selectBody> </fromItem> </selectBody> </fromItem> <joins left="true"> <rightItem xsi:type="sql:ETable" name="Person"/> <onExpression xsi:type="sql:EAndExpression"> <leftExpression xsi:type="sql:EEqualsTo"> <leftExpression xsi:type="sql:EColumn" columnName="ref_p"> <table name="TEMP_OBJ"/> </leftExpression> <rightExpression xsi:type="sql:EColumn" columnName="Person_id"> <table name="Person"/> </rightExpression> </leftExpression> <rightExpression xsi:type="sql:EEqualsTo"> <leftExpression xsi:type="sql:EColumn" columnName="val"> <table name="TEMP_OBJ"/> </leftExpression> <rightExpression xsi:type="sql:ELongValue" value="1"/> </rightExpression> </onExpression> </joins> </selectBody> </fromItem> <joins> <rightItem xsi:type="sql:ESubSelect"> <alias name="TEMP_RIGHT"/> <selectBody xsi:type="sql:EPlainSelect"> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="val"/> <expression xsi:type="sql:ELongValue" value="1"/> </selectItems> <selectItems xsi:type="sql:ESelectExpressionItem"> <alias name="res"/> <expression xsi:type="sql:EStringValue" value="Peter"/> </selectItems> </selectBody> </rightItem> </joins> </selectBody> </fromItem> <where xsi:type="sql:EEqualsTo"> <leftExpression xsi:type="sql:EColumn" columnName="res"> <table name="TEMP_BODY"/> </leftExpression> <rightExpression xsi:type="sql:ELongValue" value="1"/> </where> <groupBy> <groupByExpressions xsi:type="sql:EColumn" columnName="ref_c"> <table name="TEMP_BODY"/> </groupByExpressions> </groupBy> </selectBody> </rightItem> <onExpression xsi:type="sql:EEqualsTo"> <leftExpression xsi:type="sql:EColumn" columnName="ref_c"> <table name="TEMP_SOURCE"/> </leftExpression> <rightExpression xsi:type="sql:EColumn" columnName="ref_c"> <table name="TEMP_BODY"/> </rightExpression> </onExpression> </joins> </selectBody> </fromItem> <where xsi:type="sql:EEqualsTo"> <leftExpression xsi:type="sql:EColumn" columnName="res"> <table name="TEMP_BODY"/> </leftExpression> <rightExpression xsi:type="sql:ELongValue" value="0"/> </where> </selectBody> </sql:ESelect> 